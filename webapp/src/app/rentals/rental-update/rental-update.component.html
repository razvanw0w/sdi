<h2>Update rental</h2>
<form #formDir="ngForm" [formGroup]="rentalForm">
  <div [hidden]="formDir.submitted">
    <div class="form-group">
      <label for="movieId">Movie ID</label>
      <input class="form-control" formControlName="movieId" id="movieId" required>
      <div *ngIf="movieId.invalid && (movieId.dirty || movieId.touched)" class="alert alert-danger">
        <div *ngIf="movieId.errors.required">
          movieId is required.
        </div>
        <div *ngIf="movieId.errors.min">
          movieId must be greater or equal than 0.
        </div>
        <div *ngIf="movieId.errors.pattern">
          movieId must consist only of digits.
        </div>
      </div>
    </div>

    <div class="form-group">
      <label for="clientId">Client ID</label>
      <input class="form-control" formControlName="clientId" id="clientId" required>
      <div *ngIf="clientId.invalid && (clientId.dirty || clientId.touched)" class="alert alert-danger">
        <div *ngIf="clientId.errors.required">
          clientId is required.
        </div>
        <div *ngIf="clientId.errors.min">
          clientId must be greater or equal than 0.
        </div>
        <div *ngIf="clientId.errors.pattern">
          clientId must consist only of digits.
        </div>
      </div>
    </div>

    <div class="form-group">
      <label for="date">Date</label>
      <input class="form-control" formControlName="date" id="date" required>
      <div *ngIf="date.invalid && (date.dirty || date.touched)" class="alert">
        <div *ngIf="date.errors.required">
          Date is required.
        </div>
        <div *ngIf="date.errors.pattern">
          Date is invalid (format: DD-MM-YYYY).
        </div>
      </div>
    </div>

    <div class="form-group">
      <label for="time">Time</label>
      <input class="form-control" formControlName="time" id="time" required>
      <div *ngIf="time.invalid && (time.dirty || time.touched)" class="alert">
        <div *ngIf="time.errors.required">
          Time is required.
        </div>
        <div *ngIf="time.errors.pattern">
          Time is invalid (format: HH:MM).
        </div>
      </div>
    </div>

    <button (click)="update(movieId.value, clientId.value, date.value, time.value)" [disabled]="rentalForm.invalid"
            type="submit">
      Submit
    </button>
  </div>
  <div *ngIf="formDir.submitted" class="submitted-message">
    <p *ngIf="successfulUpdate">Rental updated!</p>
    <p *ngIf="!successfulUpdate">Rental update failed: rental doesn't exist</p>
  </div>
</form>

<nav>
  <div class="panels" routerLink="/rentals" routerLinkActive="active">< Back</div>
</nav>
